Use `rate_limiting` table (pattern from `momentum-score-calculator`) keyed by
`user_id`, `function_name` with PG upsert in a Postgres RPC to ensure atomicity.

```sql
-- Rate Limiting infrastructure (added in M1.5.3 pre-milestone)
CREATE TABLE IF NOT EXISTS rate_limiting (
    user_id UUID NOT NULL,
    function_name TEXT NOT NULL,
    window_start TIMESTAMPTZ NOT NULL,
    request_count INT NOT NULL DEFAULT 0,
    last_request_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    PRIMARY KEY (user_id, function_name, window_start)
);
ALTER TABLE rate_limiting ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Users can view own rate limits"
    ON rate_limiting
    FOR SELECT
    USING (auth.uid() = user_id);
CREATE POLICY "Service role can manage rate limits"
    ON rate_limiting
    FOR ALL
    TO service_role
    USING (true);
CREATE INDEX idx_rate_limiting_func_window
    ON rate_limiting(function_name, window_start DESC);
```
