# ðŸš¦ M1.5.2 Â· Pre-Milestone Readiness Review

## Summary Judgment

âœ… Proceed â€“ scope and specs are largely complete. Minor clarifications required
before coding starts.

## Missing / Ambiguous Items

1. **Category enumeration** â€“ Spec references "enum from design system" but the
   actual list and i18n keys are not provided.
2. **RPC vs direct insert** â€“ Decide whether to add `insert_action_step` RPC or
   use `.insert` directly; impacts backend timeline.
3. **Error-handling UX** â€“ Snackbar only is mentioned; clarify behavior for
   offline/timeout scenarios.
4. **Onboarding integration** â€“ Location of `kHasSetActionStep` flag and
   dependency on Epic 1.11 timing need confirmation.
5. **Accessibility copy** â€“ Semantic labels for chips and validation error
   messages require wording guidance.
6. **Analytics schema** â€“ Define event parameters for `action_step_set` and
   `action_step_completed`.

## Non-Obvious Edge Cases

- Duplicate goal in the same week â€“ update vs insert?
- User edits frequency after days already logged â€“ how to reconcile existing
  logs?
- Network loss on submit â€“ retry or offline queue?
- Long (multi-line) descriptions within 5-80 chars â€“ does the field grow
  gracefully?
- Screen reader focus order when navigating between category dropdown,
  description, and frequency chips.

## Mini QA Plan

â€¢ **Unit / Widget Tests**

- Validation helpers (`isPositivePhrase`, `isFrequencyInRange`).
- `ActionStepController.submit` success & failure paths with mocked Supabase
  client.
- Form enabled/disabled states & button throttling.
- Frequency selector semantics and chip accessibility.

â€¢ **Golden Tests**

- Light & dark themes.
- Mobile (360Ã—690) & tablet (768Ã—1024) breakpoints.

â€¢ **Integration Tests**

- Supabase emulator: insert and fetch row.
- Error path when Supabase returns 4xx/5xx.

â€¢ **Accessibility Checks**

- Semantics for chips, error text annunciation, focus traversal.
- Verification that confetti respects reduced-motion setting (from later
  milestone).

â€¢ **Performance**

- Measure end-to-end insert latency; fail if > 2 s p95 in CI.

## Action Items

| # | Item                                                 | Owner         | Status      |
| - | ---------------------------------------------------- | ------------- | ----------- |
| 1 | Finalize category enum list & localization keys      | Design        | âœ… Complete |
| 2 | Decide on RPC vs direct insert; create stub if RPC   | Backend       | âšª Planned  |
| 3 | Define offline/timeout UX pattern                    | UX            | âšª Planned  |
| 4 | Document analytics event properties                  | Data          | âšª Planned  |
| 5 | Provide wording for semantic labels & error messages | Accessibility | âšª Planned  |

## Sign-Off

Pending completion of Action Items 1-3 (estimated 0.5-day mini-sprint). Once
addressed, milestone is cleared to begin implementation.
