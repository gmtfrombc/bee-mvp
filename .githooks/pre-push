#!/usr/bin/env bash
set -e

# Prevent infinite loop if hook triggered by automated CI.
if [[ -n "$CI" ]]; then
  exit 0
fi

echo "ğŸš¦ Pre-push: running fast local CI (make ci-fast)â€¦"

if ! make ci-fast; then
  echo "âŒï¸ Local CI failed â€“ push aborted. Fix issues and commit again."
  exit 1
fi

echo "âœ… Local CI passed â€“ proceeding with push." 